{% extends 'base.html'%}
{% load static %}
{% load bootstrap_tags %}
{% block content %}

<!-- For loop for items in cart -->

<div class="album py-5 bg-light">
    <div class="container">
        <div class="row">
            {% for item in cart_items %}
            <div class="col-md-4">
                <div class="card mb-4 shadow-sm">
                    <span class="badge badge-danger"><strong><i class="fas fa-pound-sign"></i>&nbsp;{{ item.product.price }}</strong></span>
                    </h1>
                    <a href="{{ item.product.image.url }}" data-lightbox="{{item.product.image.url }}"><img
                            class="prd card-img-top img-fluid" src="{{ item.product.image.url}}"></a>

                    <div class="card-body">
                        <h3 class="card-text">{{ item.product.product_name}}</h3>
                        <p class="card-text">Category: {{ item.product.category}}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- End of for loop for items -->
<div class="container text-center">
<div class="row">
    <div class="col-md-12 col-xs-12">
    <p>Total: &nbsp;</p>
    <p><span> <i class="fas fa-pound-sign"></i>&nbsp;{{ total }}</span></p>
</div>
</div>
</div>

<div class="container border mb-5">
    <div class="row">
        <div class="col-md-12 col-xs-12">
<form role="form" method="post" id="payment-form" action="{% url 'checkout' %}">
    <legend class="text-center mt-2">Payment Details</legend>
    <hr>
    <div id="credit-card-errors" style="display: none;">
        <div id="alert-message block-message error" id="stripe-error-message"></div>
    </div>

    <div class="form-group col-sm-12 mx-auto">
        {{ order_form | as_bootstrap }}
    </div>
   
    <div class="form-group col-md-12 mx-auto">
        {{ payment_form | as_bootstrap }}
    </div>


    {% csrf_token %}
    <div class="form-group col-md-6">
        <input class=" btn btn-success" id="submit_payment_btn" name="commit" type="submit" value="Submit Payment">
    </div>
</form>
</div>
</div>
</div>

{% endblock %}